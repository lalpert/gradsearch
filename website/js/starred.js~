$(document).ready(function() {
    $.ajax({
      url:"saved_searches.php",
      type:"GET",
      dataType: "html",
      data: window.location.search.replace('?', ''), 
      success : function(data) {
        $('#main_search').html(data);
        $('.gray_star').click(function(){
          $(this).hide();
          $(this).prev().show();
          if($(this).hasClass('search_star')) {
            searchStar(true);
          } else {
            setStar(true, $(this.parent.parent).attr('id'));
          }
            return false;
          });

        $('.gold_star').click(function(){
          $(this).hide();
          $(this).next().show();
          if($(this).hasClass('search_star')) {
            searchStar(false);
          } else {
            setStar(false, $(this.parent.parent).attr('id'));
          }
          return false;
        });
          },
          error : function(data) {
          }
        });
});
searchStar = function(state) { 
  $.ajax({
      url:"star_search.php",
      type: "POST",
      dataType: "json",
      data: {
      'state': state,
      'url' : window.location.search,
      'desc' : $('span#search_description').html(), 
      },
  success : function(data) {
      //TODO: we should probably do something
  },
  error : function(data) {
      //somethign here?
  }
});
}
